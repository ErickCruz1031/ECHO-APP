{"ast":null,"code":"import _regeneratorRuntime from\"/Users/erickjaimez/Desktop/ECO-APP/frontendv3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/erickjaimez/Desktop/ECO-APP/frontendv3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/erickjaimez/Desktop/ECO-APP/frontendv3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useAuth0}from\"@auth0/auth0-react\";import JSONPretty from'react-json-pretty';import{useState}from'react';//import { useEffect } from 'react';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var _useAuth=useAuth0(),user=_useAuth.user,isAuthenticated=_useAuth.isAuthenticated,getAccessTokenSilently=_useAuth.getAccessTokenSilently;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),bearerToken=_useState2[0],setBearer=_useState2[1];var handler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var callAPI;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:callAPI=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var domain,accessToken;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:domain=\"dev--hn8vcuo.us.auth0.com\";_context.next=3;return getAccessTokenSilently({audience:\"https://userAuth.com\",scope:\"read:user\"});case 3:accessToken=_context.sent;console.log(\"This is the token: \",accessToken);setBearer(accessToken);case 6:case\"end\":return _context.stop();}}},_callee);}));return function callAPI(){return _ref2.apply(this,arguments);};}();console.log(\"About to call it up\");callAPI();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handler(){return _ref.apply(this,arguments);};}();var handlerBackend=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var backendCall;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:backendCall=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://localhost:8080/authorized\",{headers:{Authorization:\"Bearer \".concat(bearerToken)}});case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;console.log(\"This is the response: \",data);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function backendCall(){return _ref4.apply(this,arguments);};}();backendCall();case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function handlerBackend(){return _ref3.apply(this,arguments);};}();return isAuthenticated&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:user.picture,alt:user.name}),/*#__PURE__*/_jsx(\"h2\",{children:user.name}),/*#__PURE__*/_jsx(\"p\",{children:user.email}),/*#__PURE__*/_jsx(\"button\",{onClick:handler,children:\" Click it \"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlerBackend,children:\" Backend Call \"}),/*#__PURE__*/_jsx(JSONPretty,{data:user})]});}//export default Profile","map":{"version":3,"sources":["/Users/erickjaimez/Desktop/ECO-APP/frontendv3/src/components/Profile.js"],"names":["React","useAuth0","JSONPretty","useState","Profile","user","isAuthenticated","getAccessTokenSilently","bearerToken","setBearer","handler","callAPI","domain","audience","scope","accessToken","console","log","handlerBackend","backendCall","fetch","headers","Authorization","response","json","data","picture","name","email"],"mappings":"yeAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA;wFAEA,cAAe,SAASC,CAAAA,OAAT,EAAkB,CAC/B,aAA0DH,QAAQ,EAAlE,CAAQI,IAAR,UAAQA,IAAR,CAAcC,eAAd,UAAcA,eAAd,CAA+BC,sBAA/B,UAA+BA,sBAA/B,CACA,cAAiCJ,QAAQ,CAAC,EAAD,CAAzC,wCAAOK,WAAP,eAAoBC,SAApB,eAEA,GAAMC,CAAAA,OAAO,0FAAG,oJACRC,OADQ,2FACE,0JAGRC,MAHQ,CAGC,2BAHD,uBAIYL,CAAAA,sBAAsB,CAAC,CAC/CM,QAAQ,uBADuC,CAE/CC,KAAK,CAAE,WAFwC,CAAD,CAJlC,QAIRC,WAJQ,eAQdC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAmCF,WAAnC,EACAN,SAAS,CAACM,WAAD,CAAT,CATc,sDADF,kBACRJ,CAAAA,OADQ,4CAadK,OAAO,CAACC,GAAR,CAAY,qBAAZ,EACAN,OAAO,GAdO,wDAAH,kBAAPD,CAAAA,OAAO,0CAAb,CAqBA,GAAMQ,CAAAA,cAAc,2FAAG,wJACfC,WADe,2FACD,iLACKC,CAAAA,KAAK,oCAAoC,CAC9DC,OAAO,CAAC,CACNC,aAAa,kBAAYd,WAAZ,CADP,CADsD,CAApC,CADV,QACZe,QADY,uCAOCA,CAAAA,QAAQ,CAACC,IAAT,EAPD,QAOZC,IAPY,gBAQlBT,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCQ,IAAtC,EARkB,wDADC,kBACfN,CAAAA,WADe,4CAarBA,WAAW,GAbU,wDAAH,kBAAdD,CAAAA,cAAc,2CAApB,CAgBA,MACEZ,CAAAA,eAAe,eACd,oCACG,YAAK,GAAG,CAAED,IAAI,CAACqB,OAAf,CAAwB,GAAG,CAAErB,IAAI,CAACsB,IAAlC,EADH,cAEG,oBAAKtB,IAAI,CAACsB,IAAV,EAFH,cAGG,mBAAItB,IAAI,CAACuB,KAAT,EAHH,cAIG,eAAQ,OAAO,CAAElB,OAAjB,wBAJH,cAKG,eAAQ,OAAO,CAAEQ,cAAjB,4BALH,cAMG,KAAC,UAAD,EAAY,IAAI,CAAEb,IAAlB,EANH,GAFH,CAaD,CAED","sourcesContent":["import React from 'react';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport JSONPretty from 'react-json-pretty';\nimport { useState } from 'react';\n//import { useEffect } from 'react';\n\nexport default function Profile(){\n  const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\n  const [bearerToken, setBearer] = useState(\"\");\n\n  const handler = async () =>{\n    const callAPI = async () =>{\n      \n    \n      const domain = \"dev--hn8vcuo.us.auth0.com\";\n      const accessToken = await getAccessTokenSilently({\n        audience: `https://userAuth.com`,\n        scope: \"read:user\",\n      });\n      console.log(\"This is the token: \", accessToken);\n      setBearer(accessToken);\n    }\n\n    console.log(\"About to call it up\")\n    callAPI();\n\n    \n\n  }\n\n\n  const handlerBackend = async () =>{\n    const backendCall = async () =>{\n      const response = await fetch(`http://localhost:8080/authorized`,{\n        headers:{\n          Authorization: `Bearer ${bearerToken}`,\n        }\n      })\n\n      const data = await response.json();\n      console.log(\"This is the response: \", data);\n\n    }\n\n    backendCall();\n  }\n\n  return (\n    isAuthenticated && ( \n     <div>\n        <img src={user.picture} alt={user.name} />\n        <h2>{user.name}</h2>\n        <p>{user.email}</p>\n        <button onClick={handler}> Click it </button>\n        <button onClick={handlerBackend}> Backend Call </button>\n        <JSONPretty data={user} />\n        {/* {JSON.stringify(user, null, 2)} */}\n      </div>\n    )\n  )\n}\n\n//export default Profile\n"]},"metadata":{},"sourceType":"module"}