{"ast":null,"code":"import _regeneratorRuntime from\"/Users/erickjaimez/Desktop/ECO-APP/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/erickjaimez/Desktop/ECO-APP/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/erickjaimez/Desktop/ECO-APP/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/erickjaimez/Desktop/ECO-APP/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Icon}from'@iconify/react';import{useState}from'react';import searchFill from'@iconify/icons-eva/search-fill';// material\nimport{styled,alpha}from'@mui/material/styles';import{generatePath,useNavigate}from'react-router';import{Box,Input,Slide,Button,InputAdornment,ClickAwayListener,IconButton}from'@mui/material';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var APPBAR_MOBILE=64;var APPBAR_DESKTOP=92;var SearchbarStyle=styled('div')(function(_ref){var theme=_ref.theme;return _defineProperty({top:0,left:0,zIndex:99,width:'100%',display:'flex',position:'absolute',alignItems:'center',height:APPBAR_MOBILE,backdropFilter:'blur(6px)',WebkitBackdropFilter:'blur(6px)',// Fix on Mobile\npadding:theme.spacing(0,3),boxShadow:theme.customShadows.z8,backgroundColor:\"\".concat(alpha(theme.palette.background.default,0.72))},theme.breakpoints.up('md'),{height:APPBAR_DESKTOP,padding:theme.spacing(0,5)});});// ----------------------------------------------------------------------\nexport default function Searchbar(_ref3){var setSearchString=_ref3.setSearchString;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setOpen=_useState2[1];var _useState3=useState(\"AIzaSyAd_ygAfqMtL2kbMXpsBd_9KPSxi_wwQn8\"),_useState4=_slicedToArray(_useState3,2),booksKey=_useState4[0],setBooksKey=_useState4[1];//Temporary only. Will store this in AWS Secrets manager\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),inputString=_useState6[0],setString=_useState6[1];var navigate=useNavigate();var handleOpen=function handleOpen(){setOpen(function(prev){return!prev;});};var getInput=function getInput(e){console.log(\"Value is : \",e.target.value);setString(e.target.value);};var clickAway=function clickAway(e){setOpen(false);//Set open to false so the search bar closes\n};var handleClose=function handleClose(){//setOpen(false);\nconsole.log(\"Entered the search bugton\");//TODO: Call Google Books API with the input as the parameter for the query\nvar callBooksAPI=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Calling the books API\");//const query = `https://www.googleapis.com/books/v1/volumes?q=subject:nonfiction&key=${booksKey}`\nquery=\"https://www.googleapis.com/books/v1/volumes?q=intitle:\".concat(inputString,\"&key=\").concat(booksKey);console.log(\"The query in this component is \",query);_context.next=5;return fetch(query);case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;console.log(\"This is the data from the books API:\\n \",data);setOpen(false);navigate('/dashboard/search',{state:{input:inputString}});//Testing this\n//TODO: Moving the API call to the the moment that we mount the Search View component\nsetSearchString(inputString);case 13:case\"end\":return _context.stop();}}},_callee);}));return function callBooksAPI(){return _ref4.apply(this,arguments);};}();console.log(\"Calling the parent function\");setOpen(false);setSearchString(inputString);navigate('/dashboard/search');//Testing this\n//callBooksAPI();\n};return/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:clickAway,children:/*#__PURE__*/_jsxs(\"div\",{children:[!isOpen&&/*#__PURE__*/_jsx(IconButton,{onClick:handleOpen,children:/*#__PURE__*/_jsx(Icon,{icon:searchFill,width:20,height:20})}),/*#__PURE__*/_jsx(Slide,{direction:\"down\",in:isOpen,mountOnEnter:true,unmountOnExit:true,children:/*#__PURE__*/_jsxs(SearchbarStyle,{children:[/*#__PURE__*/_jsx(Input,{autoFocus:true,fullWidth:true,disableUnderline:true,placeholder:\"Search\\u2026\",onChange:getInput,startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Box,{component:Icon,icon:searchFill,sx:{color:'text.disabled',width:20,height:20}})}),sx:{mr:1,fontWeight:'fontWeightBold'}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleClose,children:\"Search\"})]})})]})});}","map":{"version":3,"sources":["/Users/erickjaimez/Desktop/ECO-APP/frontend/src/layouts/dashboard/Searchbar.js"],"names":["Icon","useState","searchFill","styled","alpha","generatePath","useNavigate","Box","Input","Slide","Button","InputAdornment","ClickAwayListener","IconButton","APPBAR_MOBILE","APPBAR_DESKTOP","SearchbarStyle","theme","top","left","zIndex","width","display","position","alignItems","height","backdropFilter","WebkitBackdropFilter","padding","spacing","boxShadow","customShadows","z8","backgroundColor","palette","background","default","breakpoints","up","Searchbar","setSearchString","isOpen","setOpen","booksKey","setBooksKey","inputString","setString","navigate","handleOpen","prev","getInput","e","console","log","target","value","clickAway","handleClose","callBooksAPI","query","fetch","res","json","data","state","input","color","mr","fontWeight"],"mappings":"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","sourcesContent":["import { Icon } from '@iconify/react';\nimport { useState } from 'react';\nimport searchFill from '@iconify/icons-eva/search-fill';\n// material\nimport { styled, alpha } from '@mui/material/styles';\nimport { generatePath, useNavigate } from 'react-router';\nimport {\n  Box,\n  Input,\n  Slide,\n  Button,\n  InputAdornment,\n  ClickAwayListener,\n  IconButton\n} from '@mui/material';\n\n// ----------------------------------------------------------------------\n\nconst APPBAR_MOBILE = 64;\nconst APPBAR_DESKTOP = 92;\n\nconst SearchbarStyle = styled('div')(({ theme }) => ({\n  top: 0,\n  left: 0,\n  zIndex: 99,\n  width: '100%',\n  display: 'flex',\n  position: 'absolute',\n  alignItems: 'center',\n  height: APPBAR_MOBILE,\n  backdropFilter: 'blur(6px)',\n  WebkitBackdropFilter: 'blur(6px)', // Fix on Mobile\n  padding: theme.spacing(0, 3),\n  boxShadow: theme.customShadows.z8,\n  backgroundColor: `${alpha(theme.palette.background.default, 0.72)}`,\n  [theme.breakpoints.up('md')]: {\n    height: APPBAR_DESKTOP,\n    padding: theme.spacing(0, 5)\n  }\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function Searchbar({setSearchString}) {\n  const [isOpen, setOpen] = useState(false);\n  const [booksKey, setBooksKey] = useState(\"AIzaSyAd_ygAfqMtL2kbMXpsBd_9KPSxi_wwQn8\");//Temporary only. Will store this in AWS Secrets manager\n  const [inputString, setString] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleOpen = () => {\n    setOpen((prev) => !prev);\n  };\n\n  const getInput = e =>{\n    console.log(\"Value is : \", e.target.value)\n    setString(e.target.value);\n\n  }\n\n  const clickAway = e =>{\n    setOpen(false);//Set open to false so the search bar closes\n  }\n\n  const handleClose = () => {\n    //setOpen(false);\n    console.log(\"Entered the search bugton\");\n    //TODO: Call Google Books API with the input as the parameter for the query\n     const callBooksAPI = async () =>{\n       console.log(\"Calling the books API\");\n       \n      //const query = `https://www.googleapis.com/books/v1/volumes?q=subject:nonfiction&key=${booksKey}`\n      const query = `https://www.googleapis.com/books/v1/volumes?q=intitle:${inputString}&key=${booksKey}`\n      console.log(\"The query in this component is \", query);\n      const res = await fetch(query);\n      const data = await res.json();\n      console.log(\"This is the data from the books API:\\n \", data);\n\n      setOpen(false);\n      navigate('/dashboard/search', { state: {input: inputString}});//Testing this\n      //TODO: Moving the API call to the the moment that we mount the Search View component\n      setSearchString(inputString);\n\n     }\n     console.log(\"Calling the parent function\")\n     setOpen(false);\n     setSearchString(inputString);\n     navigate('/dashboard/search');//Testing this\n     \n     //callBooksAPI();\n     \n\n\n  };\n\n  return (\n    <ClickAwayListener onClickAway={clickAway}>\n      <div>\n        {!isOpen && (\n          <IconButton onClick={handleOpen}>\n            <Icon icon={searchFill} width={20} height={20} />\n          </IconButton>\n        )}\n\n        <Slide direction=\"down\" in={isOpen} mountOnEnter unmountOnExit>\n          <SearchbarStyle>\n            <Input\n              autoFocus\n              fullWidth\n              disableUnderline\n              placeholder=\"Searchâ€¦\"\n              onChange={getInput}\n              startAdornment={\n                <InputAdornment position=\"start\">\n                  <Box\n                    component={Icon}\n                    icon={searchFill}\n                    sx={{ color: 'text.disabled', width: 20, height: 20 }}\n                  />\n                </InputAdornment>\n              }\n              sx={{ mr: 1, fontWeight: 'fontWeightBold' }}\n            />\n            <Button variant=\"contained\" onClick={handleClose}>\n              Search\n            </Button>\n          </SearchbarStyle>\n        </Slide>\n      </div>\n    </ClickAwayListener>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}